---
layout: post
title:  "Köteorins centrala begrepp"
---
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Köteorins centrala begrepp</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Köteorins centrala begrepp</h1>
</header>
<p>Köteori används för att analysera system där kunder och betjänare interagerar. Hur många kunder kommer det i snitt att finnas i systemet? Är systemet stabilt eller kommer antalet kunder att öka obehindrat?</p>
<p>Hur man får fram svaren på dessa och liknande frågor tas upp nedan.</p>
<p>För att kategorisera kösystem används ofta en modell “A/B/x”. A är fördelningen mellan ankomster, B motsvarar betjäningstidernas fördelning och x antalet betjänare. Denna konvention saknar dock information om antalet buffertplatser i systemet. Så länge inget annat anges gäller hursomhelst att antalet sådana platser är oändligt.</p>
<p>A och B antar ofta ett av tre värden:</p>
<ul>
<li>M - exponentialfördelad</li>
<li>D - deterministisk (konstant)</li>
<li>G - godtycklig fördelning (men känd)</li>
</ul>
<h2 id="olika-kötyper">Olika kötyper</h2>
<h3 id="markovska-köer">Markovska köer</h3>
<ul>
<li>Beskrivs av <em>markovkedjor</em></li>
<li>Alla tider mellan ankomster samt betjäningstider är exponentialfördelade.</li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?A%28t%29%20%3D%201%20-%20e%5E%7B-%20%5Clambda%20t%7D" alt="A(t) = 1 - e^{- \lambda t}" title="A(t) = 1 - e^{- \lambda t}" /></li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?B%28x%29%20%3D%201%20-%20e%5E%7B-%20%5Crho%20x%7D" alt="B(x) = 1 - e^{- \rho x}" title="B(x) = 1 - e^{- \rho x}" /></li>
</ul>
<h5 id="standardmall-för-beräkning">Standardmall för beräkning</h5>
<ol type="1">
<li>Rita markovkedjan</li>
<li>Hitta tillståndsfördelningen med snittmtoden</li>
<li>Beräkna intressanta performanceparametrar</li>
</ol>
<ul>
<li>E(N)</li>
<li>E(T)</li>
<li>P(Spärr)</li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Clambda%20_%7Beff%7D" alt="\lambda _{eff}" title="\lambda _{eff}" /></li>
</ul>
<h4 id="mm1">M/M/1</h4>
<p><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Cbar%7BN%7D%20%3D%20%5Cfrac%7B%5Crho%7D%7B1-%5Crho%7D%20%3D%20%5Cfrac%7B%5Clambda%7D%7B%5Cmu-%5Clambda%7D" alt="\bar{N} = \frac{\rho}{1-\rho} = \frac{\lambda}{\mu-\lambda}" title="\bar{N} = \frac{\rho}{1-\rho} = \frac{\lambda}{\mu-\lambda}" /></p>
<h4 id="mmm">M/M/m</h4>
<h4 id="mm1k---begränsade-köplatser">M/M/1/K - begränsade köplatser</h4>
<h4 id="begränsat-antal-kunder">begränsat antal kunder</h4>
<h4 id="begränsat-antal-kunder-och-begränsat-antal-köplatser">begränsat antal kunder och begränsat antal köplatser</h4>
<h4 id="mmm-upptagetsystem-erlangsystemet">M/M/m * upptagetsystem (Erlangsystemet)</h4>
<ol type="1">
<li>m betjänter</li>
<li>inga köplatser</li>
<li>ankomsterna är poissonprocess</li>
<li>ankomstintensitet är alltid <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Clambda" alt="\lambda" title="\lambda" /></li>
</ol>
<ul>
<li>Bra apporximation om man har många kunder i förhållande till betjänter.</li>
<li>P(spärr) kallas i Erlangsystem för <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E_m%28%5Crho%29" alt="E_m(\rho)" title="E_m(\rho)" />
<ul>
<li>räknas ut m.h.a. rekursion eller tabeller</li>
</ul></li>
<li>avverkad trafik = <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28N%29%20%3D%20%5Clambda_%7Beff%7D%20%5Cbar%7Bx%7D%20%3D%20%5Crho%281-E_m%28%5Crho%29%29" alt="E(N) = \lambda_{eff} \bar{x} = \rho(1-E_m(\rho))" title="E(N) = \lambda_{eff} \bar{x} = \rho(1-E_m(\rho))" /></li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Cbar%7Bx%7D%20%3D%20%5Cfrac%7B1%7D%7B%5Crho%7D" alt="\bar{x} = \frac{1}{\rho}" title="\bar{x} = \frac{1}{\rho}" /></li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?p_k%20%3D%20%5Crho%2Fk%20%5Cfrac%7B%5Crho%5E%7Bk-1%7D%2F%28k-1%29%21%7D%7B%5Csum_%7Bi%3D0%7D%5E%7Bm%7D%20%5Cfrac%7B%5Crho%5Ei%7D%7Bi%21%7D%7D%3D%5Cfrac%7B%5Crho%7D%7Bk%7D%20p_%7Bk-1%7D" alt="p_k = \rho/k \frac{\rho^{k-1}/(k-1)!}{\sum_{i=0}^{m} \frac{\rho^i}{i!}}=\frac{\rho}{k} p_{k-1}" title="p_k = \rho/k \frac{\rho^{k-1}/(k-1)!}{\sum_{i=0}^{m} \frac{\rho^i}{i!}}=\frac{\rho}{k} p_{k-1}" /></li>
</ul>
<h3 id="icke-markovska-köer">Icke-markovska köer</h3>
<h4 id="mg1">M/G/1</h4>
<ul>
<li>E(X) går att beräkna eftersom man vet fördelningen</li>
<li>E(T) är trixigare då den beror på hur många som redan är i systemet</li>
<li>se formelsamling.</li>
</ul>
<h3 id="könät">Könät</h3>
<p>Ankomsterna till nod 2 är lika med output från nod 1</p>
<h6 id="howto">HOWTO</h6>
<ol type="1">
<li>Ställ upp ankomstintensiteterna som ekvationssystem</li>
<li>Räkna ut <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28N_i%29%20%3D%20%5Cfrac%7B%5Crho%20_i%7D%7B1-%5Crho%20_i%7D" alt="E(N_i) = \frac{\rho _i}{1-\rho _i}" title="E(N_i) = \frac{\rho _i}{1-\rho _i}" /></li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28T_i%29%20%3D%20%5Cfrac%7BE%28N_i%29%7D%7B%5Clambda%20_i%7D" alt="E(T_i) = \frac{E(N_i)}{\lambda _i}" title="E(T_i) = \frac{E(N_i)}{\lambda _i}" /></li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28N_%7Bqi%7D%29%20%3D%20E%28N_i%29%20-%20E%28N_si%29%20%3D%20E%28N_i%29%20-%20%5Crho%20_i" alt="E(N_{qi}) = E(N_i) - E(N_si) = E(N_i) - \rho _i" title="E(N_{qi}) = E(N_i) - E(N_si) = E(N_i) - \rho _i" /> Dela med lambda för att få medeltid.</li>
</ol>
<h6 id="att-tänka-på">Att tänka på</h6>
<p>Om man vill veta hur lång tid det tar för ett paket genom ett nät som passerar en viss nod så summeras de gemensamma noderna samt sannolikheten för det ena alternativet * tiden för den och samma sak för det andra alternativet</p>
<p>tiden i ett system beror bara på lambda in i systemet och E(N) (summan av alla delsystem</p>
<h4 id="återkoppling">Återkoppling</h4>
<h6 id="exempeluppgifter">Exempeluppgifter</h6>
<ul>
<li>Vad är sannolikheten att en kund aldrig betjänas av nod x?
<ul>
<li>geometrisk summa</li>
</ul></li>
<li>Hur många gånger kommer en kund att ha betjänats i nod x?
<ul>
<li>ankomstintensitet för x / ankomstintensitet för hela nätet</li>
</ul></li>
</ul>
<h2 id="lexikon">Lexikon</h2>
<h5 id="transformer">Transformer</h5>
<p>Z-transformen kan användas för att härleda E(X). I denna kurs har man barnsligt nog valt att definera z-transformen som<br />
<img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?F%28z%29%20%3D%20%5Csum_%7Bn%3D0%7D%5E%7B%5Cinfty%7D%20f_n%20z%5En" alt="F(z) = \sum_{n=0}^{\infty} f_n z^n" title="F(z) = \sum_{n=0}^{\infty} f_n z^n" /><br />
Alltså med positivt n i exponenten.</p>
<ul>
<li>Genom att transformera tillståndssannolikheterna får vi<br />
<img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?P%28z%29%20%3D%20%5Csum_%7B0%7D%5E%7B%5Cinfty%7D%20z%5Ek%20p_k" alt="P(z) = \sum_{0}^{\infty} z^k p_k" title="P(z) = \sum_{0}^{\infty} z^k p_k" /></li>
<li>Genom att derivera med avseende på z och låta z -&gt; 1 så finner man E(X)</li>
</ul>
<h5 id="snittmetoden">Snittmetoden</h5>
<p>Dra vertikala streck mellan tillstånden. De bågar påväg på ena hållet som strecket korsar måste vara lika med de korsande bågarna på andra hållet.</p>
<h5 id="bayes-sats">Bayes’ sats</h5>
<p><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?P%28B_i%20%7C%20A%29%20%3D%20%5Cfrac%7BP%28A%20%7C%20B_i%29P%28B_i%29%7D%7B%5Csum_%7Bj%7D%20P%28A%20%7C%20B_j%29P%28B_j%29%7D" alt="P(B_i | A) = \frac{P(A | B_i)P(B_i)}{\sum_{j} P(A | B_j)P(B_j)}" title="P(B_i | A) = \frac{P(A | B_i)P(B_i)}{\sum_{j} P(A | B_j)P(B_j)}" /></p>
<h5 id="erbjuden-trafik-avverkad-trafik-och-spärrad-trafik">Erbjuden trafik, avverkad trafik och spärrad trafik</h5>
<p>avverkad trafik = erbjuden trafik - spärrad trafik 1. Erbjuden trafik är ett annat ord för <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Crho%20%3D%20%5Cfrac%7B%5Clambda%7D%7B%5Cmu%7D" alt="\rho = \frac{\lambda}{\mu}" title="\rho = \frac{\lambda}{\mu}" /></p>
<h5 id="markovkedjan-och-markovprocessen">Markovkedjan och Markovprocessen</h5>
<ul>
<li>Stokastisk process där allt som spelar roll för nästa tillstånd är nuvarande tillstånd.</li>
<li>Tidsdiskret -&gt; Markovkedja</li>
<li>Tidskontinuerlig -&gt; Markovprocess</li>
</ul>
<h5 id="en">E(N)</h5>
<ul>
<li>Kan härledas genom definition av medelvärdet eller z-transformera och låta <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?z%20-%3E%201" alt="z -&gt; 1" title="z -&gt; 1" />.</li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Csum_%7B0%7D%5E%7B%5Cinfty%7D%20k%20p_k" alt="\sum_{0}^{\infty} k p_k" title="\sum_{0}^{\infty} k p_k" /></li>
<li>För M/M/1: <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Csum_%7Bk%3D0%7D%5E%7B%5Cinfty%7D%20kp_k%20%3D%20%5Cfrac%7B%5Crho%7D%7B1-%5Crho%7D" alt="\sum_{k=0}^{\infty} kp_k = \frac{\rho}{1-\rho}" title="\sum_{k=0}^{\infty} kp_k = \frac{\rho}{1-\rho}" /></li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Cbar%7BN%7D%20%3D%20%5Cbar%7BN_q%7D%20%2B%20%5Cbar%7BN_s%7D" alt="\bar{N} = \bar{N_q} + \bar{N_s}" title="\bar{N} = \bar{N_q} + \bar{N_s}" /></li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28N_s%29" alt="E(N_s)" title="E(N_s)" /> fås genom att summera alla tillstånd då betjäning pågår.</li>
</ul>
<h5 id="pspärr---spärrsannolikhet">P(spärr) - spärrsannolikhet</h5>
<ul>
<li>Är noll om det finns oändligt med buffertplatser</li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Cfrac%7B%5Clambda%20_Lp_L%7D%7B%5Csum_%7Bk%3D0%7D%5E%7BL%7D%20%5Clambda%20_kp_k%7D" alt="\frac{\lambda _Lp_L}{\sum_{k=0}^{L} \lambda _kp_k}" title="\frac{\lambda _Lp_L}{\sum_{k=0}^{L} \lambda _kp_k}" /></li>
<li>Om <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Clambda%20_i%20%3D%20%5Clambda" alt="\lambda _i = \lambda" title="\lambda _i = \lambda" /> så är är <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?P%28sp%C3%A4rr%29%20%3D%20p_L" alt="P(spärr) = p_L" title="P(spärr) = p_L" /></li>
<li>Medelvärdet av antalet kunder som spärras = <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Clambda%20_L%20p_L" alt="\lambda _L p_L" title="\lambda _L p_L" /></li>
</ul>
<h5 id="effektiva-lambda">Effektiva lambda</h5>
<ul>
<li>Är ekvivalent med <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Clambda" alt="\lambda" title="\lambda" /> när buffert är obegränsad</li>
<li>Medelantalet som får komma in i systemet (alltså alla som inte blir spärrade)</li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Csum_%7Bk%3D0%7D%5E%7BL-1%7D%20%5Clambda%20_kp_k" alt="\sum_{k=0}^{L-1} \lambda _kp_k" title="\sum_{k=0}^{L-1} \lambda _kp_k" /></li>
</ul>
<h5 id="et">E(T)</h5>
<ul>
<li>Medeltiden i som spenderas i systemet.</li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?T%20%3D%20W%20%2B%20%5Cbar%7Bx%7D" alt="T = W + \bar{x}" title="T = W + \bar{x}" /> (väntetid + betjäningstid)</li>
<li>Använd Littles sats</li>
</ul>
<h5 id="ew">E(W)</h5>
<ul>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Cfrac%7B%5Crho%7D%7B%5Cmu%20%281-%5Crho%29%7D" alt="\frac{\rho}{\mu (1-\rho)}" title="\frac{\rho}{\mu (1-\rho)}" /></li>
</ul>
<h5 id="littles-sats">Littles sats</h5>
<p>Antalet genomsnittliga kunder N = produkten av det genomsnittliga antalet icke-blockerade ankomster per tidsenhet och genomsnittliga tiden en kund spenderar i systemet. * <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28T%29%20%3D%20%5Cfrac%7BE%28N%29%7D%7B%5Clambda%20_%7Beff%7D%7D" alt="E(T) = \frac{E(N)}{\lambda _{eff}}" title="E(T) = \frac{E(N)}{\lambda _{eff}}" /> * <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28N%29%20%3D%20E%28T%29%20%5Clambda%20_%7Beff%7D" alt="E(N) = E(T) \lambda _{eff}" title="E(N) = E(T) \lambda _{eff}" /> * <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28N_s%29%20%3D%20%5Cbar%7Bx%7D%20%5Clambda%20_%7Beff%7D" alt="E(N_s) = \bar{x} \lambda _{eff}" title="E(N_s) = \bar{x} \lambda _{eff}" /> * <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28N_q%29%20%3D%20W%20%5Clambda%20_%7Beff%7D" alt="E(N_q) = W \lambda _{eff}" title="E(N_q) = W \lambda _{eff}" /></p>
<h5 id="ankomstintensitet">Ankomstintensitet</h5>
<ul>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Clambda" alt="\lambda" title="\lambda" /> betecknar hur många kunder som kommer per sekund</li>
<li><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?%5Cfrac%7B1%7D%7B%5Clambda%7D" alt="\frac{1}{\lambda}" title="\frac{1}{\lambda}" /> betecknar därför tiden mellan ankomster</li>
</ul>
<h5 id="ködisciplin">Ködisciplin</h5>
<h5 id="buffertplatser">Buffertplatser</h5>
<h5 id="medelbetjäningstid">Medelbetjäningstid</h5>
<p><img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?E%28x%29%20%3D%20%5Cfrac%7BE%28N_s%29%7D%7B%5Clambda%20_%7Beff%7D%7D" alt="E(x) = \frac{E(N_s)}{\lambda _{eff}}" title="E(x) = \frac{E(N_s)}{\lambda _{eff}}" /></p>
<h5 id="poissonprocesser">Poissonprocesser</h5>
<ul>
<li>Om ankomsterna är exponentialfördelade och med samma medelvärde bildar ankomsterna en Poissonprocess.</li>
<li>Minneslös precis som markovkedjan och markovprocessen</li>
<li>sannolikheten för N ankomster är då poissonfördelad och ges av <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?P%28N%20%3D%20k%29%20%3D%20%5Cfrac%7B%28%5Clambda%20t%29%5E%7Bk%7D%7D%7Bk%21%7De%5E%7B-%20%5Clambda%20t%7D" alt="P(N = k) = \frac{(\lambda t)^{k}}{k!}e^{- \lambda t}" title="P(N = k) = \frac{(\lambda t)^{k}}{k!}e^{- \lambda t}" /></li>
</ul>
<h5 id="tillståndsdiagram">Tillståndsdiagram</h5>
<p>Används för att visualisera kösystemets olika tillstånd. Liknar finite state machines.</p>
<h3 id="lösningar">Lösningar</h3>
<h4 id="hur-stor-andel-av-tiden-arbetar-en-betjänare">Hur stor andel av tiden arbetar en betjänare?</h4>
<ol type="1">
<li>def. av medelvärde baserat på states där betjänare arbetar</li>
<li>E(Ns)/m</li>
</ol>
</body>
</html>
